# Music Recommender Web App

A Next.js web application for exploring music recommendations with controllable AI and interactive 3D visualization.

## Features

- **Search**: Search through 62,000+ tracks by name or artist
- **Controllable Recommendations**: Tune parameters for personalized results
  - Popularity (underground to mainstream)
  - Artist Diversity (familiar to new artists)
  - Exploration (safe picks to adventurous discoveries)
  - Genre filtering
- **3D Visualization**: Interactive t-SNE visualization of track embeddings
  - Zoom, pan, and rotate
  - Click to select tracks
  - Color by popularity or genre

## Getting Started

### Prerequisites

- Node.js 18+
- The exported data files in `public/data/` (generated by `src/export_data.py`)

### Required Data Files

Before running, ensure these files exist in `public/data/`:

- `tracks.json` - Track metadata
- `embeddings.bin` - Track embeddings (Float32Array binary)
- `embeddings_meta.json` - Embeddings dimensions
- `tsne_coords.json` - Pre-computed 3D t-SNE coordinates
- `search_index.json` - Inverted index for search
- `genres.json` - Available genres

To generate these files, run from the project root:

```bash
python src/export_data.py
```

### Installation

```bash
npm install
```

### Development

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### Production Build

```bash
npm run build
npm start
```

## Deployment to Vercel

1. Push the `web/` directory to a Git repository
2. Import the project to Vercel
3. Ensure the data files are included (or use Git LFS for large files)
4. Deploy

### Important: Large Data Files

The `embeddings.bin` (~30MB) and `tsne_coords.json` (~4MB) files may need to be:
- Committed with Git LFS
- Or generated during build
- Or served from a CDN

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/search?q=<query>` | GET | Search tracks |
| `/api/recommend` | POST | Get recommendations |
| `/api/neighbors/[id]` | GET | Get track neighbors |
| `/api/genres` | GET | List available genres |

## Tech Stack

- **Framework**: Next.js 14
- **Styling**: Tailwind CSS
- **3D Visualization**: Three.js + react-three-fiber
- **Language**: TypeScript
